<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE PERFECT TEN | The Ultimate Top Ten Challenge</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Bebas+Neue&family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #FFD700;
            --gold-bright: #FFEA00;
            --gold-dark: #B8860B;
            --deep-blue: #0a1628;
            --electric-blue: #00D4FF;
            --hot-pink: #FF1493;
            --purple: #8B00FF;
            --stage-gradient: linear-gradient(180deg, #0a1628 0%, #1a0a2e 50%, #0a1628 100%);
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Source Sans 3', sans-serif;
            background: var(--deep-blue);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background */
        .stage-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--stage-gradient);
            z-index: -2;
        }

        .stage-lights {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
            pointer-events: none;
        }

        .light-beam {
            position: absolute;
            width: 300px;
            height: 800px;
            background: linear-gradient(180deg, rgba(255, 215, 0, 0.15) 0%, transparent 100%);
            transform-origin: top center;
            animation: beam-sweep 8s ease-in-out infinite;
        }

        .light-beam:nth-child(1) { left: 10%; animation-delay: 0s; }
        .light-beam:nth-child(2) { left: 30%; animation-delay: -2s; }
        .light-beam:nth-child(3) { left: 50%; animation-delay: -4s; }
        .light-beam:nth-child(4) { left: 70%; animation-delay: -6s; }
        .light-beam:nth-child(5) { left: 90%; animation-delay: -1s; }

        @keyframes beam-sweep {
            0%, 100% { transform: rotate(-15deg); opacity: 0.3; }
            50% { transform: rotate(15deg); opacity: 0.6; }
        }

        /* Floating particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--gold);
            border-radius: 50%;
            animation: float-up 15s linear infinite;
            opacity: 0;
        }

        @keyframes float-up {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-100vh) scale(1); opacity: 0; }
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        .logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(3rem, 10vw, 6rem);
            letter-spacing: 0.1em;
            background: linear-gradient(180deg, var(--gold-bright) 0%, var(--gold) 50%, var(--gold-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 60px rgba(255, 215, 0, 0.5);
            position: relative;
            display: inline-block;
            animation: logo-glow 3s ease-in-out infinite;
        }

        .logo::before {
            content: 'THE PERFECT TEN';
            position: absolute;
            left: 0;
            top: 0;
            background: linear-gradient(180deg, var(--gold-bright) 0%, var(--gold) 50%, var(--gold-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: blur(20px);
            opacity: 0.5;
            z-index: -1;
        }

        @keyframes logo-glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .tagline {
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            letter-spacing: 0.3em;
            color: var(--electric-blue);
            margin-top: 10px;
            text-transform: uppercase;
        }

        /* Main container */
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Screen states */
        .screen {
            display: none;
            animation: screen-enter 0.5s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes screen-enter {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome screen */
        .welcome-content {
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-description {
            font-size: 1.25rem;
            line-height: 1.8;
            color: var(--text-secondary);
            margin: 30px 0;
        }

        .prize-display {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%);
            border: 2px solid var(--gold);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            position: relative;
            overflow: hidden;
        }

        .prize-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 215, 0, 0.1), transparent 30%);
            animation: prize-spin 10s linear infinite;
        }

        @keyframes prize-spin {
            100% { transform: rotate(360deg); }
        }

        .prize-amount {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 4rem;
            color: var(--gold);
            position: relative;
            z-index: 1;
        }

        .prize-label {
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            letter-spacing: 0.3em;
            color: var(--text-secondary);
            position: relative;
            z-index: 1;
        }

        /* Buttons */
        .btn {
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 18px 50px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            color: var(--deep-blue);
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 50px rgba(255, 215, 0, 0.5);
        }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.3) 50%, transparent 60%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .btn-primary:hover::after {
            transform: translateX(100%);
        }

        .btn-secondary {
            background: transparent;
            color: var(--electric-blue);
            border: 2px solid var(--electric-blue);
        }

        .btn-secondary:hover {
            background: var(--electric-blue);
            color: var(--deep-blue);
        }

        /* Game board */
        .game-board {
            display: grid;
            gap: 20px;
        }

        .round-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .round-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .round-badge {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--hot-pink), var(--purple));
            padding: 10px 25px;
            border-radius: 10px;
            letter-spacing: 0.1em;
        }

        .category-name {
            font-family: 'Oswald', sans-serif;
            font-size: 1.8rem;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .score-timer {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .score-display, .timer-display {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-display span {
            color: var(--gold);
        }

        .timer-display {
            color: var(--electric-blue);
        }

        .timer-display.warning {
            color: var(--hot-pink);
            animation: timer-pulse 0.5s ease-in-out infinite;
        }

        @keyframes timer-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Top 10 list */
        .top-ten-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: repeat(5, auto);
            gap: 8px 20px;
            grid-auto-flow: column;
        }

        @media (max-width: 700px) {
            .top-ten-list {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                grid-auto-flow: row;
            }
        }

        .list-item {
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 20px;
            transition: all 0.3s ease;
            min-height: 65px;
        }

        .list-item.revealed {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 215, 0, 0.05) 100%);
            border-color: var(--gold);
            animation: item-reveal 0.5s ease-out;
        }

        .list-item.revealed.player-found {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 212, 255, 0.05) 100%);
            border-color: var(--electric-blue);
        }

        @keyframes item-reveal {
            0% { transform: scale(1.05); opacity: 0.5; }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); opacity: 1; }
        }

        .rank-number {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            width: 50px;
            text-align: center;
            color: var(--gold);
        }

        .list-item:first-child .rank-number {
            font-size: 2.5rem;
            color: var(--gold-bright);
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .item-content {
            flex: 1;
            font-family: 'Oswald', sans-serif;
            font-size: 1.3rem;
            letter-spacing: 0.02em;
        }

        .item-placeholder {
            color: var(--text-secondary);
            font-style: italic;
            opacity: 0.5;
        }

        .item-points {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--electric-blue);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .list-item.revealed .item-points {
            opacity: 1;
        }

        /* Input area */
        .input-area {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .guess-input {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.2rem;
            padding: 15px 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            width: 400px;
            max-width: 100%;
            outline: none;
            transition: all 0.3s;
        }

        .guess-input:focus {
            border-color: var(--electric-blue);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.2);
        }

        .guess-input::placeholder {
            color: var(--text-secondary);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }

        /* Category selection */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .category-card {
            background: var(--card-bg);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .category-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(255, 215, 0, 0.2);
        }

        .category-card h3 {
            font-family: 'Oswald', sans-serif;
            font-size: 1.3rem;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .category-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 8px;
        }

        /* Finale */
        .finale-board {
            max-width: 900px;
            margin: 0 auto;
        }

        .finale-slots {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: repeat(5, auto);
            gap: 8px 20px;
            grid-auto-flow: column;
        }

        @media (max-width: 700px) {
            .finale-slots {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
                grid-auto-flow: row;
            }
        }

        .finale-slot {
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--card-bg);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 20px;
            min-height: 60px;
            transition: all 0.3s;
        }

        .finale-slot.filled {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, transparent 100%);
            border-color: var(--gold-dark);
        }

        .finale-slot.drop-target {
            border-color: var(--electric-blue);
            background: rgba(0, 212, 255, 0.1);
        }

        .finale-slot.correct {
            background: linear-gradient(135deg, rgba(0, 255, 100, 0.2) 0%, transparent 100%);
            border-color: #00ff64;
        }

        .finale-slot.incorrect {
            background: linear-gradient(135deg, rgba(255, 50, 50, 0.2) 0%, transparent 100%);
            border-color: #ff3232;
        }

        .draggable-items {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            min-height: 80px;
        }

        .draggable-item {
            font-family: 'Oswald', sans-serif;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--electric-blue), var(--purple));
            padding: 15px 25px;
            border-radius: 10px;
            cursor: grab;
            transition: all 0.2s;
            user-select: none;
        }

        .draggable-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .draggable-item:active {
            cursor: grabbing;
        }

        .draggable-item.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        /* Results screen */
        .results-content {
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .final-score {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 6rem;
            color: var(--gold);
            text-shadow: 0 0 60px rgba(255, 215, 0, 0.5);
            animation: score-pop 0.5s ease-out;
        }

        @keyframes score-pop {
            0% { transform: scale(0.5); opacity: 0; }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .result-message {
            font-family: 'Oswald', sans-serif;
            font-size: 2rem;
            color: var(--electric-blue);
            margin: 20px 0;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .prize-won {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3rem;
            color: var(--gold);
            margin: 30px 0;
        }

        /* Incorrect feedback */
        .incorrect-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 500;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.1s;
        }

        .incorrect-overlay.show {
            opacity: 1;
        }

        .incorrect-x {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 20rem;
            color: #ff3232;
            text-shadow: 0 0 60px rgba(255, 50, 50, 0.8), 0 0 120px rgba(255, 50, 50, 0.4);
            animation: x-pulse 0.3s ease-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 0.8;
        }

        .incorrect-x span {
            font-size: 3rem;
            letter-spacing: 0.3em;
            margin-top: 20px;
            text-shadow: 0 0 30px rgba(255, 50, 50, 0.8);
        }

        @keyframes x-pulse {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Skip button */
        .btn-skip {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 25px;
            font-size: 0.9rem;
        }

        .btn-skip:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
            color: var(--text-primary);
        }

        .round-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-top: 20px;
            justify-content: center;
        }

        /* Today's Top Ten (Comedy) */
        .comedy-screen {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .comedy-header {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--hot-pink);
            margin-bottom: 10px;
        }

        .comedy-topic {
            font-family: 'Oswald', sans-serif;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 30px;
            text-transform: uppercase;
        }

        .comedy-list {
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .comedy-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px 20px;
            margin-bottom: 10px;
            background: var(--card-bg);
            border-radius: 12px;
            border-left: 4px solid var(--hot-pink);
            opacity: 0;
            transform: translateX(-20px);
            animation: comedy-reveal 0.4s ease-out forwards;
        }

        @keyframes comedy-reveal {
            to { opacity: 1; transform: translateX(0); }
        }

        .comedy-number {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--hot-pink);
            min-width: 40px;
        }

        .comedy-text {
            font-size: 1.1rem;
            line-height: 1.5;
        }

        /* Top Ten Twist */
        .twist-screen {
            max-width: 900px;
            margin: 0 auto;
        }

        .twist-clue-area {
            text-align: center;
            margin: 30px 0;
        }

        .twist-clue-number {
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            color: var(--text-secondary);
            letter-spacing: 0.2em;
            margin-bottom: 10px;
        }

        .twist-clue {
            font-family: 'Oswald', sans-serif;
            font-size: 2rem;
            color: var(--electric-blue);
            padding: 30px;
            background: var(--card-bg);
            border: 2px solid var(--electric-blue);
            border-radius: 15px;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: clue-glow 2s ease-in-out infinite;
        }

        @keyframes clue-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.2); }
            50% { box-shadow: 0 0 40px rgba(0, 212, 255, 0.4); }
        }

        .twist-points-display {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3rem;
            color: var(--gold);
            margin: 20px 0;
        }

        .twist-points-label {
            font-size: 1rem;
            color: var(--text-secondary);
            letter-spacing: 0.2em;
        }

        .twist-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .twist-input {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 1.2rem;
            padding: 15px 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            width: 500px;
            max-width: 100%;
            outline: none;
            transition: all 0.3s;
        }

        .twist-input:focus {
            border-color: var(--electric-blue);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.2);
        }

        .twist-input::placeholder {
            color: var(--text-secondary);
        }

        .twist-result {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-family: 'Oswald', sans-serif;
            font-size: 1.3rem;
            display: none;
        }

        .twist-result.correct {
            display: block;
            background: linear-gradient(135deg, rgba(0, 255, 100, 0.2) 0%, transparent 100%);
            border: 2px solid #00ff64;
            color: #00ff64;
        }

        .twist-result.wrong {
            display: block;
            background: linear-gradient(135deg, rgba(255, 50, 50, 0.2) 0%, transparent 100%);
            border: 2px solid #ff3232;
            color: #ff3232;
        }

        .twist-result .correct-answer {
            color: var(--gold);
            margin-top: 10px;
        }

        .twist-timer {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--electric-blue);
            margin-bottom: 10px;
        }

        .twist-timer.warning {
            color: var(--hot-pink);
            animation: timer-pulse 0.5s ease-in-out infinite;
        }

        .twist-revealed-clues {
            margin-top: 30px;
        }

        .twist-revealed-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 15px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .twist-revealed-number {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--electric-blue);
            min-width: 30px;
        }

        .lockout-notice {
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            color: var(--hot-pink);
            text-align: center;
            padding: 15px;
            background: rgba(255, 20, 147, 0.1);
            border-radius: 10px;
            margin: 20px 0;
            animation: lockout-flash 0.5s ease-in-out;
        }

        @keyframes lockout-flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .twist-round-info {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .twist-stat {
            text-align: center;
        }

        .twist-stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            color: var(--gold);
        }

        .twist-stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 20px;
            top: -20px;
            animation: confetti-fall 3s ease-out forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(0) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotateZ(720deg); opacity: 0; }
        }

        /* How to play modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--deep-blue);
            border: 2px solid var(--gold);
            border-radius: 20px;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 40px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: var(--gold);
        }

        .modal h2 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 20px;
        }

        .modal h3 {
            font-family: 'Oswald', sans-serif;
            font-size: 1.3rem;
            color: var(--electric-blue);
            margin: 25px 0 10px;
            text-transform: uppercase;
        }

        .modal p, .modal li {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 10px;
        }

        .modal ul {
            padding-left: 20px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .round-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .score-timer {
                width: 100%;
                justify-content: space-between;
            }

            .input-area {
                flex-direction: column;
                align-items: center;
            }

            .guess-input {
                width: 100%;
            }

            .category-name {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="stage-background"></div>
    <div class="stage-lights">
        <div class="light-beam"></div>
        <div class="light-beam"></div>
        <div class="light-beam"></div>
        <div class="light-beam"></div>
        <div class="light-beam"></div>
    </div>
    <div class="particles" id="particles"></div>

    <header class="header">
        <h1 class="logo">THE PERFECT TEN</h1>
        <p class="tagline">The Ultimate Top Ten Challenge</p>
    </header>

    <main class="game-container">
        <!-- Welcome Screen -->
        <section id="welcome-screen" class="screen active">
            <div class="welcome-content">
                <p class="welcome-description">
                    Race to name items from iconic Top Ten lists across pop culture, sports, travel, and more. 
                    Score points by guessing correctly, then prove your ranking prowess in the finale 
                    by assembling THE PERFECT TEN!
                </p>
                <div class="prize-display">
                    <p class="prize-label">GRAND PRIZE</p>
                    <p class="prize-amount">$10,000</p>
                </div>
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="startGame()">PLAY NOW</button>
                    <button class="btn btn-secondary" onclick="showHowToPlay()">HOW TO PLAY</button>
                </div>
            </div>
        </section>

        <!-- Category Selection Screen -->
        <section id="category-screen" class="screen">
            <div class="round-header">
                <div class="round-info">
                    <div class="round-badge" id="round-number">ROUND 1</div>
                    <span style="color: var(--text-secondary);">Choose your category</span>
                </div>
                <div class="score-timer">
                    <div class="score-display">SCORE: <span id="category-score">0</span></div>
                </div>
            </div>
            <div class="category-grid" id="category-grid"></div>
        </section>

        <!-- Game Screen -->
        <section id="game-screen" class="screen">
            <div class="game-board">
                <div class="round-header">
                    <div class="round-info">
                        <div class="round-badge" id="game-round">ROUND 1</div>
                        <div class="category-name" id="current-category">Loading...</div>
                    </div>
                    <div class="score-timer">
                        <div class="score-display">SCORE: <span id="game-score">0</span></div>
                        <div class="timer-display" id="timer">‚è± 90</div>
                    </div>
                </div>
                <div class="top-ten-list" id="top-ten-list"></div>
                <div class="input-area">
                    <input type="text" class="guess-input" id="guess-input" placeholder="Type your answer..." autocomplete="off">
                    <button class="btn btn-primary" onclick="submitGuess()">GUESS</button>
                </div>
                <div class="round-controls">
                    <button class="btn btn-skip" onclick="skipRound()">SKIP TO NEXT ROUND ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Today's Top Ten (Comedy Break) -->
        <section id="comedy-screen" class="screen">
            <div class="comedy-screen">
                <div class="round-header" style="justify-content: center; margin-bottom: 20px;">
                    <div class="round-badge" style="background: linear-gradient(135deg, var(--hot-pink), var(--purple));">TODAY'S TOP TEN</div>
                </div>
                <div class="comedy-header">üé§ COMEDY BREAK</div>
                <div class="comedy-topic" id="comedy-topic"></div>
                <div class="comedy-list" id="comedy-list"></div>
                <div style="margin-top: 30px;">
                    <button class="btn btn-primary" onclick="endComedyBreak()">CONTINUE TO TOP TEN TWIST ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Top Ten Twist Screen -->
        <section id="twist-screen" class="screen">
            <div class="twist-screen">
                <div class="round-header">
                    <div class="round-info">
                        <div class="round-badge" style="background: linear-gradient(135deg, var(--purple), var(--electric-blue));">TOP TEN TWIST</div>
                    </div>
                    <div class="score-timer">
                        <div class="score-display">SCORE: <span id="twist-score">0</span></div>
                    </div>
                </div>
                
                <div class="twist-round-info">
                    <div class="twist-stat">
                        <div class="twist-stat-value" id="twist-round-num">1/3</div>
                        <div class="twist-stat-label">Twist Round</div>
                    </div>
                    <div class="twist-stat">
                        <div class="twist-stat-value" id="twist-clue-num">1</div>
                        <div class="twist-stat-label">Clue</div>
                    </div>
                </div>

                <div class="twist-clue-area">
                    <div class="twist-timer" id="twist-timer">Next clue in: 10</div>
                    <div class="twist-clue-number">CLUE #<span id="twist-current-clue">1</span></div>
                    <div class="twist-clue" id="twist-clue-text">Loading...</div>
                </div>

                <div class="twist-points-display">
                    <span class="twist-points-label">POINTS AVAILABLE</span><br>
                    <span id="twist-points-value">100</span>
                </div>

                <div id="twist-result" class="twist-result">
                    <div id="twist-result-text"></div>
                    <div id="twist-correct-answer" class="correct-answer"></div>
                </div>

                <div class="twist-options" id="twist-options">
                    <input type="text" class="twist-input" id="twist-input" placeholder="What is this Top Ten list?" autocomplete="off">
                    <button class="btn btn-primary" onclick="submitTwistGuess()">GUESS</button>
                </div>

                <div class="twist-revealed-clues" id="twist-revealed-clues"></div>

                <div class="round-controls">
                    <button class="btn btn-skip" onclick="skipToFinale()">SKIP TO FINALE ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Finale Screen -->
        <section id="finale-screen" class="screen">
            <div class="finale-board">
                <div class="round-header" style="justify-content: center;">
                    <div class="round-badge" style="background: linear-gradient(135deg, var(--gold), var(--gold-dark));">THE PERFECT TEN FINALE</div>
                </div>
                <p style="text-align: center; color: var(--text-secondary); margin: 20px 0;">
                    Place the 4 items in their correct ranked positions!
                </p>
                <div class="timer-display" id="finale-timer" style="text-align: center; font-size: 3rem; margin: 20px 0;">‚è± 30</div>
                <div class="category-name" id="finale-category" style="text-align: center; margin-bottom: 20px;"></div>
                <div class="draggable-items" id="draggable-items"></div>
                <div class="finale-slots" id="finale-slots"></div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-primary" id="finale-submit-btn" onclick="submitFinale()">LOCK IN ANSWERS</button>
                </div>
            </div>
        </section>

        <!-- Results Screen -->
        <section id="results-screen" class="screen">
            <div class="results-content">
                <h2 style="font-family: 'Oswald', sans-serif; font-size: 1.5rem; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.2em;">GAME OVER</h2>
                <div class="final-score" id="final-score">0</div>
                <p class="result-message" id="result-message">Great Game!</p>
                <div class="prize-won" id="prize-won"></div>
                <div id="finale-results" style="margin: 30px 0; text-align: left;"></div>
                <button class="btn btn-primary" onclick="playAgain()">PLAY AGAIN</button>
            </div>
        </section>
    </main>

    <!-- How to Play Modal -->
    <div class="modal-overlay" id="how-to-play-modal">
        <div class="modal">
            <button class="modal-close" onclick="closeHowToPlay()">&times;</button>
            <h2>HOW TO PLAY</h2>
            
            <h3>üéØ Act One: Know Your Top Ten (Rounds 1-3)</h3>
            <p>You'll face Top Ten lists from various categories. Type answers to fill in the list before time runs out!</p>
            <ul>
                <li><strong>#1 Answer:</strong> 200 points</li>
                <li><strong>#2-10 Answers:</strong> 100 points each</li>
                <li><strong>Round Bonus:</strong> +100 points for finding the most answers</li>
                <li><strong>Round 3:</strong> All points DOUBLED!</li>
            </ul>

            <h3>üé§ Today's Top Ten (Comedy Break)</h3>
            <p>Take a breather with a comedic Top Ten list inspired by current events. No points here‚Äîjust laughs!</p>

            <h3>üîÄ Act Two: Top Ten Twist</h3>
            <p>Clues from a mystery Top Ten list are revealed one at a time, every 10 seconds. Type your guess for what category the list represents!</p>
            <ul>
                <li><strong>Clue 1:</strong> 100 points</li>
                <li><strong>Clue 2:</strong> 90 points</li>
                <li><strong>Each subsequent clue:</strong> -10 points</li>
                <li><strong>Guess anytime:</strong> The fewer clues you need, the more points you earn!</li>
                <li><strong>Wrong guesses:</strong> Keep trying until time runs out!</li>
            </ul>

            <h3>üèÜ Act Three: The Perfect Ten Finale</h3>
            <p>Six items are already placed on a Top Ten list. You must place the remaining 4 items in their correct ranked positions in 30 seconds!</p>
            <ul>
                <li><strong>All 4 correct:</strong> $10,000</li>
                <li><strong>3 correct:</strong> $3,000</li>
                <li><strong>2 correct:</strong> $1,000</li>
                <li><strong>1 correct:</strong> $500</li>
                <li><strong>0 correct:</strong> $500 consolation</li>
            </ul>

            <h3>üí° Tips</h3>
            <ul>
                <li>Think broadly - answers can be worded different ways</li>
                <li>Don't overthink - your first instinct is often right</li>
                <li>Watch the timer and pace yourself</li>
            </ul>
        </div>
    </div>

    <div class="confetti-container" id="confetti-container"></div>

    <!-- Incorrect Answer Overlay -->
    <div class="incorrect-overlay" id="incorrect-overlay">
        <div class="incorrect-x">
            ‚úï
            <span>INCORRECT</span>
        </div>
    </div>

    <script>
        // Game State
        const gameState = {
            score: 0,
            currentRound: 1,
            totalRounds: 3,
            currentCategory: null,
            revealedItems: [],
            timerInterval: null,
            timeLeft: 90,
            usedCategories: [],
            finaleAnswers: {},
            // Twist game state
            twistRound: 1,
            twistTotalRounds: 3,
            currentTwistCategory: null,
            currentClueIndex: 0,
            isLockedOut: false,
            revealedClues: [],
            usedTwistCategories: [],
            twistTimerInterval: null,
            twistClueTime: 10,
            twistRoundComplete: false
        };

        // Comedy Top Ten Lists
        const comedyLists = [
            {
                topic: "Top Ten Signs Your Smart Home Is Too Smart",
                items: [
                    "It orders groceries before you even know you're hungry",
                    "Alexa starts finishing your sentences... correctly",
                    "Your thermostat judges your outfit choices",
                    "The fridge sends passive-aggressive texts about that leftover pizza",
                    "Your doorbell has started screening your visitors' social media",
                    "The vacuum cleaner has developed 'preferences'",
                    "Your TV suggests therapy shows after monitoring your week",
                    "The lights dim automatically when you start dancing",
                    "Your coffee maker knows your schedule better than you do",
                    "It's asking for equity in the house"
                ]
            },
            {
                topic: "Top Ten Excuses For Being Late To Work",
                items: [
                    "My GPS took me to a different dimension",
                    "I was busy manifesting punctuality",
                    "There was traffic... in my mind",
                    "My horoscope said to avoid all commitments today",
                    "I was on a very important call with my cat",
                    "Time is a social construct and I reject it",
                    "My alarm clock is still on 2020 time",
                    "I got lost in a TikTok scroll hole",
                    "Mercury was in retrograde... again",
                    "I'm not late, I'm just on creative time"
                ]
            },
            {
                topic: "Top Ten Signs You've Been Binge-Watching Too Much",
                items: [
                    "You've started rating real-life conversations out of 5 stars",
                    "You expect a 'Skip Intro' button in meetings",
                    "You're emotionally attached to fictional characters more than relatives",
                    "You've forgotten what sunlight looks like",
                    "Your sleep schedule has become 'European'",
                    "You say 'just one more episode' and it's 4am",
                    "You've started speaking in show quotes",
                    "Your streaming service asks if you're still alive",
                    "You've memorized the Wilhelm scream",
                    "You've developed opinions about font choices in credits"
                ]
            }
        ];

        // Twist Categories (clues reveal items from the list, player guesses the category)
        const twistCategories = [
            {
                category: "Most Followed People on Instagram",
                keywords: ["instagram", "followed", "followers", "ig", "insta", "social media followers"],
                clues: [
                    "Cristiano Ronaldo",
                    "Lionel Messi",
                    "Selena Gomez",
                    "Kylie Jenner",
                    "Dwayne Johnson",
                    "Ariana Grande",
                    "Kim Kardashian",
                    "Beyonc√©",
                    "Khlo√© Kardashian",
                    "Taylor Swift"
                ]
            },
            {
                category: "Countries With The Most Olympic Gold Medals",
                keywords: ["olympic", "olympics", "gold medals", "gold", "medals", "countries gold"],
                clues: [
                    "United States",
                    "Soviet Union",
                    "Great Britain",
                    "Germany",
                    "France",
                    "China",
                    "Italy",
                    "Sweden",
                    "Australia",
                    "Hungary"
                ]
            },
            {
                category: "Best-Selling Music Artists of All Time",
                keywords: ["best selling", "best-selling", "music artists", "albums sold", "selling artists", "records sold", "top selling"],
                clues: [
                    "The Beatles",
                    "Elvis Presley",
                    "Elton John",
                    "Michael Jackson",
                    "Madonna",
                    "Led Zeppelin",
                    "Rihanna",
                    "Pink Floyd",
                    "Eminem",
                    "Mariah Carey"
                ]
            },
            {
                category: "Largest Companies By Market Cap",
                keywords: ["market cap", "largest companies", "biggest companies", "valuable companies", "market value", "market capitalization"],
                clues: [
                    "Apple",
                    "Microsoft",
                    "Saudi Aramco",
                    "Alphabet (Google)",
                    "Amazon",
                    "NVIDIA",
                    "Meta",
                    "Berkshire Hathaway",
                    "Tesla",
                    "TSMC"
                ]
            },
            {
                category: "Most Spoken Languages in the World",
                keywords: ["spoken languages", "languages", "most spoken", "world languages", "popular languages"],
                clues: [
                    "English",
                    "Mandarin Chinese",
                    "Hindi",
                    "Spanish",
                    "French",
                    "Arabic",
                    "Bengali",
                    "Portuguese",
                    "Russian",
                    "Japanese"
                ]
            },
            {
                category: "Tallest Buildings in the World",
                keywords: ["tallest buildings", "tall buildings", "skyscrapers", "tallest skyscrapers", "highest buildings", "tall towers"],
                clues: [
                    "Burj Khalifa",
                    "Merdeka 118",
                    "Shanghai Tower",
                    "Abraj Al-Bait Clock Tower",
                    "Ping An Finance Centre",
                    "Lotte World Tower",
                    "One World Trade Center",
                    "Guangzhou CTF Finance Centre",
                    "Tianjin CTF Finance Centre",
                    "China Zun"
                ]
            },
            {
                category: "Highest Grossing Movies of All Time",
                keywords: ["highest grossing", "box office", "grossing movies", "top movies", "biggest movies", "highest earning"],
                clues: [
                    "Avatar",
                    "Avengers: Endgame",
                    "Avatar: The Way of Water",
                    "Titanic",
                    "Star Wars: The Force Awakens",
                    "Avengers: Infinity War",
                    "Spider-Man: No Way Home",
                    "Inside Out 2",
                    "Jurassic World",
                    "The Lion King"
                ]
            },
            {
                category: "Most Populous Countries in the World",
                keywords: ["populous", "population", "most people", "biggest population", "most populated", "largest population"],
                clues: [
                    "India",
                    "China",
                    "United States",
                    "Indonesia",
                    "Pakistan",
                    "Nigeria",
                    "Brazil",
                    "Bangladesh",
                    "Russia",
                    "Ethiopia"
                ]
            }
        ];

        // Top Ten Lists Database
        const categories = {
            "highest_grossing_movies": {
                name: "Highest-Grossing Movies of All Time",
                items: [
                    "Avatar",
                    "Avengers: Endgame", 
                    "Avatar: The Way of Water",
                    "Titanic",
                    "Star Wars: The Force Awakens",
                    "Avengers: Infinity War",
                    "Spider-Man: No Way Home",
                    "Inside Out 2",
                    "Jurassic World",
                    "The Lion King"
                ],
                aliases: {
                    "avatar": [0, 2],
                    "avengers": [1, 5],
                    "titanic": [3],
                    "star wars": [4],
                    "force awakens": [4],
                    "infinity war": [5],
                    "endgame": [1],
                    "spider-man": [6],
                    "spiderman": [6],
                    "no way home": [6],
                    "inside out": [7],
                    "inside out 2": [7],
                    "jurassic": [8],
                    "jurassic world": [8],
                    "lion king": [9],
                    "the lion king": [9],
                    "way of water": [2]
                }
            },
            "popular_dog_breeds": {
                name: "Most Popular Dog Breeds in America",
                items: [
                    "French Bulldog",
                    "Labrador Retriever",
                    "Golden Retriever",
                    "German Shepherd",
                    "Poodle",
                    "Bulldog",
                    "Rottweiler",
                    "Beagle",
                    "Dachshund",
                    "German Shorthaired Pointer"
                ],
                aliases: {
                    "french bulldog": [0],
                    "frenchie": [0],
                    "labrador": [1],
                    "lab": [1],
                    "golden": [2],
                    "golden retriever": [2],
                    "german shepherd": [3],
                    "shepherd": [3],
                    "poodle": [4],
                    "bulldog": [5],
                    "rottweiler": [6],
                    "rottie": [6],
                    "beagle": [7],
                    "dachshund": [8],
                    "wiener dog": [8],
                    "pointer": [9],
                    "gsp": [9]
                }
            },
            "streaming_shows": {
                name: "Most Watched Streaming Shows",
                items: [
                    "Squid Game",
                    "Wednesday",
                    "Stranger Things",
                    "The Night Agent",
                    "Ginny & Georgia",
                    "The Diplomat",
                    "You",
                    "Outer Banks",
                    "Queen Charlotte",
                    "Bridgerton"
                ],
                aliases: {
                    "squid game": [0],
                    "squid": [0],
                    "wednesday": [1],
                    "stranger things": [2],
                    "stranger": [2],
                    "night agent": [3],
                    "ginny": [4],
                    "ginny and georgia": [4],
                    "diplomat": [5],
                    "you": [6],
                    "outer banks": [7],
                    "obx": [7],
                    "queen charlotte": [8],
                    "bridgerton": [9]
                }
            },
            "us_tourist_destinations": {
                name: "Most Visited U.S. Tourist Destinations",
                items: [
                    "Times Square",
                    "Las Vegas Strip",
                    "Central Park",
                    "Union Station",
                    "Grand Central Terminal",
                    "Magic Kingdom",
                    "Golden Gate Bridge",
                    "Disneyland",
                    "National Mall",
                    "Navy Pier"
                ],
                aliases: {
                    "times square": [0],
                    "las vegas": [1],
                    "vegas strip": [1],
                    "central park": [2],
                    "union station": [3],
                    "grand central": [4],
                    "magic kingdom": [5],
                    "disney world": [5],
                    "golden gate": [6],
                    "disneyland": [7],
                    "national mall": [8],
                    "washington mall": [8],
                    "navy pier": [9],
                    "chicago pier": [9]
                }
            },
            "fast_food_chains": {
                name: "Largest Fast Food Chains by Revenue",
                items: [
                    "McDonald's",
                    "Starbucks",
                    "Chick-fil-A",
                    "Taco Bell",
                    "Wendy's",
                    "Dunkin'",
                    "Burger King",
                    "Subway",
                    "Domino's",
                    "Chipotle"
                ],
                aliases: {
                    "mcdonalds": [0],
                    "mcdonald's": [0],
                    "starbucks": [1],
                    "chick-fil-a": [2],
                    "chick fil a": [2],
                    "chickfila": [2],
                    "taco bell": [3],
                    "wendys": [4],
                    "wendy's": [4],
                    "dunkin": [5],
                    "dunkin donuts": [5],
                    "burger king": [6],
                    "bk": [6],
                    "subway": [7],
                    "dominos": [8],
                    "domino's": [8],
                    "chipotle": [9]
                }
            },
            "social_media_platforms": {
                name: "Most Used Social Media Platforms",
                items: [
                    "Facebook",
                    "YouTube",
                    "WhatsApp",
                    "Instagram",
                    "TikTok",
                    "WeChat",
                    "Snapchat",
                    "Telegram",
                    "Pinterest",
                    "X (Twitter)"
                ],
                aliases: {
                    "facebook": [0],
                    "youtube": [1],
                    "whatsapp": [2],
                    "instagram": [3],
                    "ig": [3],
                    "tiktok": [4],
                    "wechat": [5],
                    "snapchat": [6],
                    "snap": [6],
                    "telegram": [7],
                    "pinterest": [8],
                    "twitter": [9],
                    "x": [9]
                }
            },
            "billboard_artists": {
                name: "Artists with Most Billboard #1 Hits",
                items: [
                    "The Beatles",
                    "Mariah Carey",
                    "Elvis Presley",
                    "Rihanna",
                    "Michael Jackson",
                    "Madonna",
                    "The Supremes",
                    "Whitney Houston",
                    "Janet Jackson",
                    "Drake"
                ],
                aliases: {
                    "beatles": [0],
                    "the beatles": [0],
                    "mariah carey": [1],
                    "mariah": [1],
                    "elvis": [2],
                    "elvis presley": [2],
                    "rihanna": [3],
                    "michael jackson": [4],
                    "mj": [4],
                    "madonna": [5],
                    "supremes": [6],
                    "the supremes": [6],
                    "whitney houston": [7],
                    "whitney": [7],
                    "janet jackson": [8],
                    "janet": [8],
                    "drake": [9]
                }
            },
            "college_sports": {
                name: "Largest College Football Stadiums",
                items: [
                    "Michigan Stadium",
                    "Beaver Stadium",
                    "Ohio Stadium",
                    "Kyle Field",
                    "Neyland Stadium",
                    "Tiger Stadium",
                    "Darrell K Royal Stadium",
                    "Bryant-Denny Stadium",
                    "Sanford Stadium",
                    "Rose Bowl"
                ],
                aliases: {
                    "michigan": [0],
                    "big house": [0],
                    "beaver": [1],
                    "penn state": [1],
                    "ohio": [2],
                    "horseshoe": [2],
                    "kyle field": [3],
                    "texas a&m": [3],
                    "neyland": [4],
                    "tennessee": [4],
                    "tiger stadium": [5],
                    "lsu": [5],
                    "texas": [6],
                    "dkr": [6],
                    "bryant-denny": [7],
                    "alabama": [7],
                    "sanford": [8],
                    "georgia": [8],
                    "rose bowl": [9]
                }
            },
            "baby_names_boys": {
                name: "Most Popular Baby Names (Boys) 2024",
                items: [
                    "Liam",
                    "Noah",
                    "Oliver",
                    "James",
                    "Elijah",
                    "William",
                    "Henry",
                    "Lucas",
                    "Benjamin",
                    "Theodore"
                ],
                aliases: {
                    "liam": [0],
                    "noah": [1],
                    "oliver": [2],
                    "james": [3],
                    "elijah": [4],
                    "william": [5],
                    "will": [5],
                    "henry": [6],
                    "lucas": [7],
                    "luke": [7],
                    "benjamin": [8],
                    "ben": [8],
                    "theodore": [9],
                    "theo": [9]
                }
            },
            "video_games": {
                name: "Best-Selling Video Games of All Time",
                items: [
                    "Minecraft",
                    "Grand Theft Auto V",
                    "Tetris",
                    "Wii Sports",
                    "PUBG",
                    "Mario Kart 8",
                    "Super Mario Bros.",
                    "Red Dead Redemption 2",
                    "Overwatch",
                    "Pokemon Red/Blue"
                ],
                aliases: {
                    "minecraft": [0],
                    "gta": [1],
                    "gta v": [1],
                    "gta 5": [1],
                    "grand theft auto": [1],
                    "tetris": [2],
                    "wii sports": [3],
                    "pubg": [4],
                    "playerunknown": [4],
                    "mario kart": [5],
                    "mk8": [5],
                    "super mario": [6],
                    "mario bros": [6],
                    "red dead": [7],
                    "rdr2": [7],
                    "overwatch": [8],
                    "pokemon": [9],
                    "pokemon red": [9],
                    "pokemon blue": [9]
                }
            }
        };

        // Initialize particles
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // Show/hide screens
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // Modal functions
        function showHowToPlay() {
            document.getElementById('how-to-play-modal').classList.add('active');
        }

        function closeHowToPlay() {
            document.getElementById('how-to-play-modal').classList.remove('active');
        }

        // Start game
        function startGame() {
            gameState.score = 0;
            gameState.currentRound = 1;
            gameState.usedCategories = [];
            showCategorySelection();
        }

        // Category selection
        function showCategorySelection() {
            document.getElementById('round-number').textContent = `ROUND ${gameState.currentRound}`;
            document.getElementById('category-score').textContent = gameState.score;
            
            const grid = document.getElementById('category-grid');
            grid.innerHTML = '';
            
            const availableCategories = Object.entries(categories)
                .filter(([key]) => !gameState.usedCategories.includes(key));
            
            // Show 4 random categories
            const shuffled = availableCategories.sort(() => Math.random() - 0.5).slice(0, 4);
            
            shuffled.forEach(([key, data]) => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.innerHTML = `<h3>${data.name}</h3>`;
                card.onclick = () => selectCategory(key);
                grid.appendChild(card);
            });
            
            showScreen('category-screen');
        }

        // Select category and start round
        function selectCategory(categoryKey) {
            gameState.currentCategory = categoryKey;
            gameState.usedCategories.push(categoryKey);
            gameState.revealedItems = [];
            startRound();
        }

        // Start round
        function startRound() {
            const category = categories[gameState.currentCategory];
            const multiplier = gameState.currentRound === 3 ? 2 : 1;
            
            document.getElementById('game-round').textContent = `ROUND ${gameState.currentRound}`;
            if (gameState.currentRound === 3) {
                document.getElementById('game-round').textContent = 'ROUND 3 (2X POINTS!)';
            }
            document.getElementById('current-category').textContent = category.name;
            document.getElementById('game-score').textContent = gameState.score;
            
            // Build list
            const listContainer = document.getElementById('top-ten-list');
            listContainer.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.id = `item-${i}`;
                
                const points = i === 0 ? 200 * multiplier : 100 * multiplier;
                item.innerHTML = `
                    <span class="rank-number">#${i + 1}</span>
                    <span class="item-content"><span class="item-placeholder">???</span></span>
                    <span class="item-points">+${points}</span>
                `;
                listContainer.appendChild(item);
            }
            
            // Setup input
            const input = document.getElementById('guess-input');
            input.value = '';
            input.focus();
            input.onkeydown = (e) => {
                if (e.key === 'Enter') submitGuess();
            };
            
            // Start timer
            gameState.timeLeft = 90;
            document.getElementById('timer').textContent = `‚è± ${gameState.timeLeft}`;
            document.getElementById('timer').classList.remove('warning');
            
            if (gameState.timerInterval) clearInterval(gameState.timerInterval);
            gameState.timerInterval = setInterval(updateTimer, 1000);
            
            showScreen('game-screen');
        }

        // Timer update
        function updateTimer() {
            gameState.timeLeft--;
            const timerEl = document.getElementById('timer');
            timerEl.textContent = `‚è± ${gameState.timeLeft}`;
            
            if (gameState.timeLeft <= 10) {
                timerEl.classList.add('warning');
            }
            
            if (gameState.timeLeft <= 0) {
                endRound();
            }
        }

        // Show incorrect feedback
        function showIncorrect() {
            const overlay = document.getElementById('incorrect-overlay');
            overlay.classList.add('show');
            
            // Play a quick shake on the input
            const input = document.getElementById('guess-input');
            input.style.animation = 'none';
            input.offsetHeight; // Trigger reflow
            input.style.animation = 'shake 0.4s ease-out';
            
            setTimeout(() => {
                overlay.classList.remove('show');
            }, 600);
        }

        // Submit guess
        function submitGuess() {
            const input = document.getElementById('guess-input');
            const guess = input.value.trim().toLowerCase();
            input.value = '';
            
            if (!guess) return;
            
            const category = categories[gameState.currentCategory];
            const multiplier = gameState.currentRound === 3 ? 2 : 1;
            
            // Check against items and aliases
            let foundIndex = -1;
            
            // Direct match
            category.items.forEach((item, index) => {
                if (item.toLowerCase() === guess && !gameState.revealedItems.includes(index)) {
                    foundIndex = index;
                }
            });
            
            // Alias match
            if (foundIndex === -1) {
                for (const [alias, indices] of Object.entries(category.aliases)) {
                    if (guess.includes(alias) || alias.includes(guess)) {
                        const unrevealed = indices.find(i => !gameState.revealedItems.includes(i));
                        if (unrevealed !== undefined) {
                            foundIndex = unrevealed;
                            break;
                        }
                    }
                }
            }
            
            if (foundIndex !== -1) {
                revealItem(foundIndex, true);
                const points = foundIndex === 0 ? 200 * multiplier : 100 * multiplier;
                gameState.score += points;
                document.getElementById('game-score').textContent = gameState.score;
                
                // Check if all revealed
                if (gameState.revealedItems.length === 10) {
                    gameState.score += 100 * multiplier; // Bonus
                    document.getElementById('game-score').textContent = gameState.score;
                    setTimeout(endRound, 1000);
                }
            } else {
                // Show incorrect feedback
                showIncorrect();
            }
            
            input.focus();
        }

        // Reveal item
        function revealItem(index, playerFound = false) {
            if (gameState.revealedItems.includes(index)) return;
            
            gameState.revealedItems.push(index);
            const category = categories[gameState.currentCategory];
            const item = document.getElementById(`item-${index}`);
            
            item.classList.add('revealed');
            if (playerFound) item.classList.add('player-found');
            
            const content = item.querySelector('.item-content');
            content.innerHTML = category.items[index];
        }

        // End round
        function endRound() {
            clearInterval(gameState.timerInterval);
            
            // Reveal remaining items
            const category = categories[gameState.currentCategory];
            for (let i = 0; i < 10; i++) {
                if (!gameState.revealedItems.includes(i)) {
                    revealItem(i, false);
                }
            }
            
            // Move to next round or comedy break
            setTimeout(() => {
                gameState.currentRound++;
                if (gameState.currentRound <= gameState.totalRounds) {
                    showCategorySelection();
                } else {
                    // After Act One, go to Comedy Break
                    startComedyBreak();
                }
            }, 2000);
        }

        // Skip round
        function skipRound() {
            endRound();
        }

        // ==========================================
        // ACT TWO: TODAY'S TOP TEN (Comedy Break)
        // ==========================================
        
        function startComedyBreak() {
            const comedy = comedyLists[Math.floor(Math.random() * comedyLists.length)];
            
            document.getElementById('comedy-topic').textContent = comedy.topic;
            
            const listContainer = document.getElementById('comedy-list');
            listContainer.innerHTML = '';
            
            // Reveal items one by one with animation delays
            comedy.items.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'comedy-item';
                itemEl.style.animationDelay = `${index * 0.3}s`;
                itemEl.innerHTML = `
                    <span class="comedy-number">#${10 - index}</span>
                    <span class="comedy-text">${item}</span>
                `;
                listContainer.appendChild(itemEl);
            });
            
            showScreen('comedy-screen');
        }

        function endComedyBreak() {
            // Start Top Ten Twist
            gameState.twistRound = 1;
            gameState.usedTwistCategories = [];
            startTwistRound();
        }

        // ==========================================
        // ACT TWO: TOP TEN TWIST
        // ==========================================

        function startTwistRound() {
            // Pick an unused twist category
            const availableTwist = twistCategories.filter(
                (_, idx) => !gameState.usedTwistCategories.includes(idx)
            );
            
            if (availableTwist.length === 0 || gameState.twistRound > gameState.twistTotalRounds) {
                // Move to finale
                startFinale();
                return;
            }
            
            const randomIdx = twistCategories.indexOf(availableTwist[Math.floor(Math.random() * availableTwist.length)]);
            gameState.usedTwistCategories.push(randomIdx);
            gameState.currentTwistCategory = twistCategories[randomIdx];
            gameState.currentClueIndex = 0;
            gameState.revealedClues = [];
            gameState.twistRoundComplete = false;
            
            document.getElementById('twist-score').textContent = gameState.score;
            document.getElementById('twist-round-num').textContent = `${gameState.twistRound}/${gameState.twistTotalRounds}`;
            document.getElementById('twist-revealed-clues').innerHTML = '';
            document.getElementById('twist-result').className = 'twist-result';
            document.getElementById('twist-input').value = '';
            document.getElementById('twist-input').disabled = false;
            document.querySelectorAll('.twist-options .btn').forEach(b => b.disabled = false);
            
            // Setup input event listener
            const input = document.getElementById('twist-input');
            input.onkeydown = (e) => {
                if (e.key === 'Enter') submitTwistGuess();
            };
            
            showNextClue();
            showScreen('twist-screen');
        }

        function showNextClue() {
            if (gameState.twistRoundComplete) return;
            
            const twist = gameState.currentTwistCategory;
            
            // Check if all clues revealed (player ran out of time)
            if (gameState.currentClueIndex >= twist.clues.length) {
                endTwistRound(false);
                return;
            }
            
            const clueNum = gameState.currentClueIndex + 1;
            const points = Math.max(10, 110 - (clueNum * 10)); // 100, 90, 80... down to 10
            
            document.getElementById('twist-current-clue').textContent = clueNum;
            document.getElementById('twist-clue-num').textContent = clueNum;
            document.getElementById('twist-clue-text').textContent = twist.clues[gameState.currentClueIndex];
            document.getElementById('twist-points-value').textContent = points;
            
            // Add to revealed clues
            gameState.revealedClues.push({
                num: clueNum,
                text: twist.clues[gameState.currentClueIndex]
            });
            
            // Update revealed clues list
            const revealedContainer = document.getElementById('twist-revealed-clues');
            revealedContainer.innerHTML = gameState.revealedClues.map(c => `
                <div class="twist-revealed-item">
                    <span class="twist-revealed-number">#${c.num}</span>
                    <span>${c.text}</span>
                </div>
            `).join('');
            
            gameState.currentClueIndex++;
            
            // Start 10-second timer for next clue
            startClueTimer();
            
            // Focus input
            document.getElementById('twist-input').focus();
        }

        function startClueTimer() {
            // Clear any existing timer
            if (gameState.twistTimerInterval) {
                clearInterval(gameState.twistTimerInterval);
            }
            
            gameState.twistClueTime = 10;
            updateClueTimerDisplay();
            
            gameState.twistTimerInterval = setInterval(() => {
                gameState.twistClueTime--;
                updateClueTimerDisplay();
                
                if (gameState.twistClueTime <= 0) {
                    clearInterval(gameState.twistTimerInterval);
                    // Show next clue automatically
                    showNextClue();
                }
            }, 1000);
        }

        function updateClueTimerDisplay() {
            const timerEl = document.getElementById('twist-timer');
            timerEl.textContent = `Next clue in: ${gameState.twistClueTime}`;
            
            if (gameState.twistClueTime <= 3) {
                timerEl.classList.add('warning');
            } else {
                timerEl.classList.remove('warning');
            }
        }

        function submitTwistGuess() {
            if (gameState.twistRoundComplete) return;
            
            const input = document.getElementById('twist-input');
            const guess = input.value.trim().toLowerCase();
            
            if (!guess) return;
            
            const twist = gameState.currentTwistCategory;
            const clueNum = gameState.currentClueIndex; // Already incremented, so this is correct
            const points = Math.max(10, 110 - (clueNum * 10));
            
            // Check if guess matches category or keywords
            const categoryLower = twist.category.toLowerCase();
            const isCorrect = categoryLower.includes(guess) || 
                              guess.includes(categoryLower) ||
                              twist.keywords.some(kw => guess.includes(kw) || kw.includes(guess));
            
            if (isCorrect) {
                // Correct!
                clearInterval(gameState.twistTimerInterval);
                gameState.score += points;
                document.getElementById('twist-score').textContent = gameState.score;
                endTwistRound(true, points);
            } else {
                // Wrong - show incorrect feedback and let them keep trying
                showIncorrect();
                input.value = '';
                input.focus();
            }
        }

        function endTwistRound(won, points = 0) {
            gameState.twistRoundComplete = true;
            clearInterval(gameState.twistTimerInterval);
            
            const twist = gameState.currentTwistCategory;
            const resultEl = document.getElementById('twist-result');
            const resultText = document.getElementById('twist-result-text');
            const correctAnswer = document.getElementById('twist-correct-answer');
            
            // Disable input
            document.getElementById('twist-input').disabled = true;
            document.querySelectorAll('.twist-options .btn').forEach(b => b.disabled = true);
            
            if (won) {
                resultEl.className = 'twist-result correct';
                resultText.textContent = `‚úì CORRECT! +${points} POINTS`;
                correctAnswer.textContent = '';
            } else {
                resultEl.className = 'twist-result wrong';
                resultText.textContent = `‚úó TIME'S UP!`;
                correctAnswer.textContent = `The answer was: ${twist.category}`;
            }
            
            // Hide timer
            document.getElementById('twist-timer').textContent = '';
            
            // Move to next twist round after delay
            setTimeout(() => {
                gameState.twistRound++;
                if (gameState.twistRound <= gameState.twistTotalRounds) {
                    startTwistRound();
                } else {
                    startFinale();
                }
            }, 3000);
        }

        function skipToFinale() {
            clearInterval(gameState.twistTimerInterval);
            startFinale();
        }

        // Finale
        function startFinale() {
            // Pick a category for finale
            const finaleCategories = Object.entries(categories)
                .filter(([key]) => !gameState.usedCategories.includes(key));
            
            const [finaleKey, finaleData] = finaleCategories[Math.floor(Math.random() * finaleCategories.length)];
            gameState.finaleCategory = finaleKey;
            
            document.getElementById('finale-category').textContent = finaleData.name;
            
            // Determine which 4 slots to leave empty (not #1, spread out)
            const emptySlots = [2, 4, 6, 8].sort(() => Math.random() - 0.5).slice(0, 4);
            gameState.emptySlots = emptySlots;
            gameState.finaleAnswers = {};
            
            // Build the finale board
            const slotsContainer = document.getElementById('finale-slots');
            slotsContainer.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                const slot = document.createElement('div');
                slot.className = 'finale-slot';
                slot.dataset.rank = i;
                
                if (emptySlots.includes(i)) {
                    slot.innerHTML = `
                        <span class="rank-number">#${i + 1}</span>
                        <span class="item-content"><span class="item-placeholder">Drop answer here</span></span>
                    `;
                    slot.ondragover = (e) => {
                        e.preventDefault();
                        slot.classList.add('drop-target');
                    };
                    slot.ondragleave = () => slot.classList.remove('drop-target');
                    slot.ondrop = (e) => handleDrop(e, i);
                    slot.onclick = () => handleSlotClick(i);
                } else {
                    slot.classList.add('filled');
                    slot.innerHTML = `
                        <span class="rank-number">#${i + 1}</span>
                        <span class="item-content">${finaleData.items[i]}</span>
                    `;
                }
                
                slotsContainer.appendChild(slot);
            }
            
            // Build draggable items
            const itemsContainer = document.getElementById('draggable-items');
            itemsContainer.innerHTML = '';
            
            const dragItems = emptySlots.map(i => ({ rank: i, name: finaleData.items[i] }))
                .sort(() => Math.random() - 0.5);
            
            dragItems.forEach((item, idx) => {
                const el = document.createElement('div');
                el.className = 'draggable-item';
                el.textContent = item.name;
                el.dataset.correctRank = item.rank;
                el.draggable = true;
                el.ondragstart = (e) => {
                    e.dataTransfer.setData('text/plain', item.rank);
                    e.dataTransfer.setData('name', item.name);
                    el.classList.add('dragging');
                    gameState.selectedItem = { rank: item.rank, name: item.name, element: el };
                };
                el.ondragend = () => el.classList.remove('dragging');
                el.onclick = () => {
                    document.querySelectorAll('.draggable-item').forEach(d => d.style.outline = '');
                    el.style.outline = '3px solid var(--gold)';
                    gameState.selectedItem = { rank: item.rank, name: item.name, element: el };
                };
                itemsContainer.appendChild(el);
            });
            
            // Start finale timer
            gameState.timeLeft = 30;
            document.getElementById('finale-timer').textContent = `‚è± ${gameState.timeLeft}`;
            
            if (gameState.timerInterval) clearInterval(gameState.timerInterval);
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('finale-timer').textContent = `‚è± ${gameState.timeLeft}`;
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    submitFinale();
                }
            }, 1000);
            
            showScreen('finale-screen');
        }

        // Handle drop
        function handleDrop(e, slotRank) {
            e.preventDefault();
            const correctRank = parseInt(e.dataTransfer.getData('text/plain'));
            const name = e.dataTransfer.getData('name');
            
            placeItemInSlot(slotRank, correctRank, name);
        }

        // Handle slot click (for mobile)
        function handleSlotClick(slotRank) {
            if (gameState.selectedItem) {
                placeItemInSlot(slotRank, gameState.selectedItem.rank, gameState.selectedItem.name);
            }
        }

        // Place item in slot
        function placeItemInSlot(slotRank, correctRank, name) {
            // Remove any existing answer in this slot
            if (gameState.finaleAnswers[slotRank]) {
                // Return item to pool
                const returnedName = gameState.finaleAnswers[slotRank].name;
                const returnedRank = gameState.finaleAnswers[slotRank].correctRank;
                
                const itemsContainer = document.getElementById('draggable-items');
                const el = document.createElement('div');
                el.className = 'draggable-item';
                el.textContent = returnedName;
                el.dataset.correctRank = returnedRank;
                el.draggable = true;
                el.ondragstart = (e) => {
                    e.dataTransfer.setData('text/plain', returnedRank);
                    e.dataTransfer.setData('name', returnedName);
                    el.classList.add('dragging');
                    gameState.selectedItem = { rank: returnedRank, name: returnedName, element: el };
                };
                el.ondragend = () => el.classList.remove('dragging');
                el.onclick = () => {
                    document.querySelectorAll('.draggable-item').forEach(d => d.style.outline = '');
                    el.style.outline = '3px solid var(--gold)';
                    gameState.selectedItem = { rank: returnedRank, name: returnedName, element: el };
                };
                itemsContainer.appendChild(el);
            }
            
            // Place new answer
            gameState.finaleAnswers[slotRank] = { correctRank, name };
            
            const slot = document.querySelector(`.finale-slot[data-rank="${slotRank}"]`);
            slot.classList.remove('drop-target');
            slot.querySelector('.item-content').innerHTML = name;
            
            // Remove from draggable pool
            if (gameState.selectedItem && gameState.selectedItem.element) {
                gameState.selectedItem.element.remove();
            }
            
            gameState.selectedItem = null;
            document.querySelectorAll('.draggable-item').forEach(d => d.style.outline = '');
        }

        // Submit finale
        function submitFinale() {
            clearInterval(gameState.timerInterval);
            document.getElementById('finale-submit-btn').disabled = true;
            
            let correct = 0;
            const category = categories[gameState.finaleCategory];
            
            // Check each answer
            gameState.emptySlots.forEach(slotRank => {
                const slot = document.querySelector(`.finale-slot[data-rank="${slotRank}"]`);
                const answer = gameState.finaleAnswers[slotRank];
                
                if (answer && answer.correctRank === slotRank) {
                    slot.classList.add('correct');
                    correct++;
                } else {
                    slot.classList.add('incorrect');
                    // Show correct answer
                    setTimeout(() => {
                        slot.querySelector('.item-content').innerHTML = 
                            `<span style="text-decoration: line-through; opacity: 0.5;">${answer?.name || '(empty)'}</span> ‚Üí ${category.items[slotRank]}`;
                    }, 500);
                }
            });
            
            // Determine prize
            const prizes = { 4: 10000, 3: 3000, 2: 1000, 1: 500, 0: 500 };
            const prize = prizes[correct];
            
            setTimeout(() => {
                showResults(correct, prize);
            }, 2000);
        }

        // Show results
        function showResults(finaleCorrect, prize) {
            document.getElementById('final-score').textContent = gameState.score;
            
            let message = '';
            if (finaleCorrect === 4) {
                message = "YOU'VE CREATED THE PERFECT TEN!";
                launchConfetti();
            } else if (finaleCorrect >= 3) {
                message = "SO CLOSE! AMAZING GAME!";
            } else if (finaleCorrect >= 1) {
                message = "GREAT EFFORT!";
            } else {
                message = "BETTER LUCK NEXT TIME!";
            }
            
            document.getElementById('result-message').textContent = message;
            document.getElementById('prize-won').textContent = `Prize: $${prize.toLocaleString()}`;
            
            const resultsDiv = document.getElementById('finale-results');
            resultsDiv.innerHTML = `
                <p style="color: var(--text-secondary); text-align: center;">
                    Finale: ${finaleCorrect}/4 correct placements
                </p>
            `;
            
            showScreen('results-screen');
        }

        // Confetti
        function launchConfetti() {
            const container = document.getElementById('confetti-container');
            const colors = ['#FFD700', '#FF1493', '#00D4FF', '#8B00FF', '#00FF64'];
            
            for (let i = 0; i < 150; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    container.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 20);
            }
        }

        // Play again
        function playAgain() {
            showScreen('welcome-screen');
        }

        // Initialize
        createParticles();
        
        // Close modal on outside click
        document.getElementById('how-to-play-modal').onclick = (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                closeHowToPlay();
            }
        };
    </script>
</body>
</html>
